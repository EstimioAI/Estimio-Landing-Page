---
import Layout from "../layouts/Layout.astro";
import Nav from "../components/layout/Nav.astro";
import Footer from "../components/layout/Footer.astro";
---

<Layout title="Contact Us - Estimio">
  <Nav />

  <main class="pt-32 pb-20">
    <div class="max-w-2xl mx-auto px-6">
      <h1 class="text-4xl font-semibold text-text-primary mb-3">
        Contact Us
      </h1>
      <p class="text-text-secondary mb-10 text-lg leading-relaxed">
        Have a question, feedback, or need support? Fill out the form below and we'll get back to you as soon as possible.
      </p>

      <form
        action="https://formsubmit.co/info@estimio.ai"
        method="POST"
        id="contact-form"
        class="space-y-6"
      >
        <!-- FormSubmit config -->
        <input type="hidden" name="_subject" value="New Contact Form Submission - Estimio" />
        <input type="hidden" name="_captcha" value="true" />
        <input type="hidden" name="_next" value="https://estimio.ai/contact?submitted=true" />
        <input type="text" name="_honey" style="display:none" />

        <!-- Name -->
        <div>
          <label for="name" class="block text-sm font-semibold text-text-primary mb-2">
            Name
          </label>
          <input
            type="text"
            id="name"
            name="name"
            required
            placeholder="Your name"
            class="contact-input w-full px-4 py-3 rounded-xl border border-border bg-white text-text-primary placeholder:text-text-tertiary focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all duration-200"
          />
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-semibold text-text-primary mb-2">
            Email
          </label>
          <input
            type="email"
            id="email"
            name="email"
            required
            placeholder="you@example.com"
            class="contact-input w-full px-4 py-3 rounded-xl border border-border bg-white text-text-primary placeholder:text-text-tertiary focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all duration-200"
          />
        </div>

        <!-- Subject -->
        <div>
          <label for="subject" class="block text-sm font-semibold text-text-primary mb-2">
            Subject
          </label>
          <select
            id="subject"
            name="subject"
            required
            class="contact-input w-full px-4 py-3 rounded-xl border border-border bg-white text-text-primary focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all duration-200 appearance-none"
          >
            <option value="" disabled selected>Select a topic</option>
            <option value="General Inquiry">General Inquiry</option>
            <option value="Support">Support</option>
            <option value="Feedback">Feedback</option>
            <option value="Bug Report">Bug Report</option>
            <option value="Feature Request">Feature Request</option>
            <option value="Partnership">Partnership</option>
            <option value="Account Deletion">Account Deletion</option>
          </select>
        </div>

        <!-- Message -->
        <div>
          <label for="message" class="block text-sm font-semibold text-text-primary mb-2">
            Message
          </label>
          <textarea
            id="message"
            name="message"
            required
            rows="5"
            placeholder="Tell us how we can help..."
            class="contact-input w-full px-4 py-3 rounded-xl border border-border bg-white text-text-primary placeholder:text-text-tertiary focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all duration-200 resize-vertical"
          ></textarea>
        </div>

        <!-- Submit -->
        <button
          type="submit"
          class="btn btn-primary w-full px-6 py-3.5 text-base"
        >
          Send Message
        </button>
      </form>

      <!-- Success message (shown after redirect back) -->
      <div id="success-message" class="hidden mt-8 p-6 rounded-2xl bg-green-50 border border-green-200 text-center">
        <svg class="w-12 h-12 mx-auto mb-3 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <h2 class="text-xl font-semibold text-text-primary mb-2">Message Sent!</h2>
        <p class="text-text-secondary">Thank you for reaching out. We'll get back to you soon.</p>
      </div>
    </div>
  </main>

  <Footer />
</Layout>

<script>
  // Show success message if redirected back after submission
  const params = new URLSearchParams(window.location.search);
  if (params.get("submitted") === "true") {
    const form = document.getElementById("contact-form");
    const successMessage = document.getElementById("success-message");
    if (form) form.style.display = "none";
    if (successMessage) successMessage.classList.remove("hidden");
    // Clean up URL
    window.history.replaceState({}, "", "/contact");
  }
</script>

<style>
  /* Custom select arrow */
  select.contact-input {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236B7280' d='M6 8.825L.35 3.175l.7-.7L6 7.425l4.95-4.95.7.7z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    padding-right: 2.5rem;
  }
</style>
