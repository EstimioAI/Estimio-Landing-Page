---
const faqs = [
    {
        question: "How accurate are the estimates?",
        answer: "Estimio uses local pricing data to generate detailed line-by-line breakdowns. Most users find material pricing is accurate 90%+ of the time. But here's the thing — you're always in control. Every line item is editable, so you can adjust any price before sending. Think of it as a really fast first draft that you fine-tune, not a final number you're stuck with.",
    },
    {
        question: "What if I already have my own rates?",
        answer: "That's exactly what Custom Rates are for. Set your specific labor rates, material markups, and subcontractor costs once, and Estimio will use your numbers instead of market averages — every time. No more underbidding because a tool doesn't know what you actually charge.",
    },
    {
        question: "Is this going to replace my judgment?",
        answer: "No. Estimio does the tedious math — you make the calls. You review every line item, control your margins, and decide what goes out the door. It's like having a fast assistant who does the first draft while you focus on the details that matter.",
    },
    {
        question: "Is Estimio free to try?",
        answer: "Yes. You get a 7-day free trial with full access to every feature. After that, it's $19.99 USD ($24.99 CAD) per month — less than the profit from a single hour of work. Cancel anytime, no contracts.",
    },
    {
        question: "Is there a yearly plan?",
        answer: "Yes. The annual plan is $149.99 USD per year, which saves you 37% compared to monthly. Same full access, same cancel-anytime policy.",
    },
    {
        question: "What types of jobs can Estimio estimate?",
        answer: "Pretty much anything residential. Contractors use it for electrical, plumbing, painting, flooring, drywall, decks, fencing, bathroom remodels, kitchen remodels, roofing, siding, landscaping, and general handyman work. If you can describe the job, Estimio can estimate it.",
    },
    {
        question: "Can I generate invoices too?",
        answer: "Yes. Once a client approves your estimate, convert it into a professional invoice with one tap. Track partial and full payments, see outstanding balances at a glance, and stop chasing people down for money.",
    },
    {
        question: "How is this different from Joist or Jobber?",
        answer: "Those are great tools, but they're built for managing your whole business — scheduling, dispatching, payroll. Estimio does one thing and does it fast: turn a job description into a professional estimate in about 60 seconds. No bloated features, no steep learning curve, and priced for solo contractors — not enterprises.",
    },
];

// FAQ Structured Data for SEO
const faqSchema = {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    mainEntity: faqs.map(faq => ({
        "@type": "Question",
        name: faq.question,
        acceptedAnswer: {
            "@type": "Answer",
            text: faq.answer
        }
    }))
};
---

<section
    id="faq"
    class="py-20 md:py-28 bg-bg-gray border-t border-separator/50"
    aria-labelledby="faq-heading"
>
    <div class="section-container max-w-4xl mx-auto">
        <div class="text-center mb-16">
            <h2
                id="faq-heading"
                class="text-3xl md:text-4xl font-semibold text-text-primary mb-4"
                data-animate="fade-up"
            >
                Frequently Asked Questions
            </h2>
            <p class="text-lg text-text-secondary" data-animate="fade-up" data-animate-delay="1">
                Everything you need to know about Estimio.
            </p>
        </div>

        <div class="space-y-4">
            {
                faqs.map((faq, index) => (
                    <div class="faq-item bg-white rounded-2xl border border-separator/50 hover:shadow-md hover:border-primary/20 transition-all duration-300 overflow-hidden group" data-animate="fade-up" data-animate-delay={index + 1}>
                        <button
                            type="button"
                            class="faq-btn w-full flex items-center justify-between p-6 md:p-8 text-left focus:outline-none"
                            aria-expanded="false"
                            aria-controls={`faq-answer-${index}`}
                            onclick="toggleFaq(this)"
                        >
                            <span class="text-xl font-semibold text-text-primary group-hover:text-primary transition-colors duration-300">
                                {faq.question}
                            </span>
                            <span class="faq-icon relative flex-shrink-0 ml-4 w-6 h-6 text-primary/50 group-hover:text-primary transition-all duration-300">
                                <svg
                                    class="w-full h-full"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke="currentColor"
                                    stroke-width="2"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M19 9l-7 7-7-7"
                                    />
                                </svg>
                            </span>
                        </button>
                        <div id={`faq-answer-${index}`} class="faq-content max-h-0 overflow-hidden transition-all duration-300 ease-out" role="region" aria-hidden="true">
                            <p class="text-text-secondary leading-relaxed px-6 pb-6 md:px-8 md:pb-8 pt-0">
                                {faq.answer}
                            </p>
                        </div>
                    </div>
                ))
            }
        </div>
    </div>
</section>

<!-- FAQ Structured Data -->
<script type="application/ld+json" is:inline set:html={JSON.stringify(faqSchema)} />

<script is:inline>
    function toggleFaq(button) {
        const content = button.nextElementSibling;
        const icon = button.querySelector(".faq-icon");
        const isExpanded = button.getAttribute("aria-expanded") === "true";

        // Toggle current
        button.setAttribute("aria-expanded", !isExpanded);

        if (!isExpanded) {
            content.style.maxHeight = content.scrollHeight + "px";
            content.setAttribute("aria-hidden", "false");
            icon.style.transform = "rotate(180deg)";
            const item = button.closest(".faq-item");
            item.classList.add(
                "border-primary",
                "ring-1",
                "ring-primary/20",
                "shadow-sm",
            );
            item.classList.remove("border-separator/50");
        } else {
            content.style.maxHeight = "0";
            content.setAttribute("aria-hidden", "true");
            icon.style.transform = "rotate(0deg)";
            const item = button.closest(".faq-item");
            item.classList.remove(
                "border-primary",
                "ring-1",
                "ring-primary/20",
                "shadow-sm",
            );
            item.classList.add("border-separator/50");
        }
    }
</script>
