---
const steps = [
  {
    number: '1',
    title: 'Describe the Job',
    description: 'Tell Estimio about the project using text or photos. Include dimensions, materials, and scope.',
    icon: `<svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
      <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
    </svg>`,
  },
  {
    number: '2',
    title: 'AI Generates Estimate',
    description: 'Our AI analyzes your input and creates a detailed, accurate estimate with localized pricing.',
    icon: `<svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
      <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
    </svg>`,
  },
  {
    number: '3',
    title: 'Send to Client',
    description: 'Review, customize if needed, and send professional proposals directly to your clients.',
    icon: `<svg class="w-7 h-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
      <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
    </svg>`,
  },
];
---

<section id="how-it-works" class="py-20 md:py-28 lg:py-32 bg-white scroll-mt-20">
  <div class="section-container">
    <!-- Section Header -->
    <div class="text-center mb-14 md:mb-20">
      <div class="gsap-fade-up inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary-subtle text-primary text-sm font-medium mb-6">
        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
        </svg>
        Quick & Easy
      </div>
      <h2 class="gsap-fade-up text-3xl md:text-4xl lg:text-5xl font-semibold text-text-primary tracking-tight mb-5">
        How It Works
      </h2>
      <p class="gsap-fade-up text-lg md:text-xl text-text-secondary max-w-2xl mx-auto">
        Create professional estimates in three simple steps
      </p>
    </div>

    <!-- Steps Container -->
    <div class="relative">
      <!-- Connection Line (Desktop) - Animated gradient -->
      <div class="hidden lg:block absolute top-20 left-[16.67%] right-[16.67%] h-0.5 bg-gradient-to-r from-primary/20 via-primary/40 to-primary/20 rounded-full"></div>

      <!-- Steps Grid -->
      <ol class="grid md:grid-cols-3 gap-8 lg:gap-12">
        {steps.map((step, index) => (
          <li class="gsap-fade-up relative">
            <div class="flex flex-col items-center text-center group">
              <!-- Step Number Circle -->
              <div class="relative mb-6">
                <!-- Outer ring with pulse animation -->
                <div class="absolute inset-0 rounded-full bg-primary/10 scale-110 group-hover:scale-125 transition-transform duration-500"></div>

                <!-- Main circle -->
                <div class="relative w-20 h-20 lg:w-24 lg:h-24 rounded-full bg-gradient-to-br from-primary to-primary-dark flex items-center justify-center shadow-lg shadow-primary/25 group-hover:shadow-xl group-hover:shadow-primary/30 transition-all duration-300">
                  <span class="text-white" set:html={step.icon} />
                </div>

                <!-- Step number badge -->
                <div class="absolute -top-1 -right-1 w-7 h-7 rounded-full bg-white border-2 border-primary flex items-center justify-center shadow-sm">
                  <span class="text-xs font-bold text-primary">{step.number}</span>
                </div>
              </div>

              <!-- Content -->
              <h3 class="text-xl lg:text-2xl font-semibold text-text-primary mb-3 group-hover:text-primary transition-colors">
                {step.title}
              </h3>
              <p class="text-text-secondary leading-relaxed max-w-xs">
                {step.description}
              </p>

              <!-- Arrow (Mobile/Tablet) -->
              {index < steps.length - 1 && (
                <div class="md:hidden mt-8 flex items-center justify-center">
                  <div class="w-10 h-10 rounded-full bg-bg-gray flex items-center justify-center text-text-tertiary">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                  </div>
                </div>
              )}
            </div>
          </li>
        ))}
      </ol>
    </div>
  </div>
</section>
