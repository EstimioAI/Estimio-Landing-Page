---
interface Props {
  value: string;
  label: string;
  prefix?: string;
  suffix?: string;
  floatClass?: string;
  icon?: 'clock' | 'dollar' | 'chart' | 'trending';
  compact?: boolean;
  class?: string;
  style?: string;
}

const {
  value,
  label,
  prefix = '',
  suffix = '',
  floatClass = 'float-1',
  icon,
  compact = false,
  class: className = '',
  style = '',
} = Astro.props;

const icons = {
  clock: `<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/></svg>`,
  dollar: `<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>`,
  chart: `<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>`,
  trending: `<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><polyline points="23,6 13.5,15.5 8.5,10.5 1,18"/><polyline points="17,6 23,6 23,12"/></svg>`,
};
---

<div
  class:list={[
    'metric-card glass-card rounded-xl md:rounded-2xl shadow-lg shadow-black/5 hover:shadow-xl transition-all duration-300 group',
    floatClass,
    compact ? 'px-2.5 py-2.5 md:px-4 md:py-4' : 'px-6 py-5',
    className,
  ]}
  data-value={value}
  data-prefix={prefix}
  data-suffix={suffix}
  style={style}
>
  <!-- Icon (optional) -->
  {icon && (
    <div class="w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary mb-3 group-hover:bg-primary/15 transition-colors">
      <Fragment set:html={icons[icon]} />
    </div>
  )}

  <!-- Value -->
  <div class:list={[
    'text-primary font-bold tracking-tight number-highlight',
    compact ? 'text-lg md:text-2xl' : 'text-3xl md:text-4xl'
  ]}>
    <span class="metric-prefix">{prefix}</span>
    <span class="metric-value">0</span>
    <span class="metric-suffix">{suffix}</span>
  </div>

  <!-- Label -->
  <div class:list={[
    'text-text-secondary mt-0.5 md:mt-1',
    compact ? 'text-[10px] md:text-xs' : 'text-sm'
  ]}>
    {label}
  </div>
</div>

<style>
  .metric-card {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .metric-card:hover {
    transform: translateY(-2px);
  }
</style>
